import{jsx as e,jsxs as t}from"react/jsx-runtime";import*as i from"react";import{useState as o,useCallback as r,useMemo as n}from"react";import{useTheme as l}from"@nivo/core";import a from"prop-types";var d=function(t){var i=t.x,o=t.y,r=t.size,n=t.fill,l=t.opacity,a=void 0===l?1:l,d=t.borderWidth,s=void 0===d?0:d,c=t.borderColor;return e("circle",{r:r/2,cx:i+r/2,cy:o+r/2,fill:n,opacity:a,strokeWidth:s,stroke:void 0===c?"transparent":c,style:{pointerEvents:"none"}})},s=function(t){var i=t.x,o=t.y,r=t.size,n=t.fill,l=t.opacity,a=void 0===l?1:l,d=t.borderWidth,s=void 0===d?0:d,c=t.borderColor;return e("g",{transform:"translate("+i+","+o+")",children:e("path",{d:"\n                    M"+r/2+" 0\n                    L"+.8*r+" "+r/2+"\n                    L"+r/2+" "+r+"\n                    L"+.2*r+" "+r/2+"\n                    L"+r/2+" 0\n                ",fill:n,opacity:a,strokeWidth:s,stroke:void 0===c?"transparent":c,style:{pointerEvents:"none"}})})},c=function(t){var i=t.x,o=t.y,r=t.size,n=t.fill,l=t.opacity,a=void 0===l?1:l,d=t.borderWidth,s=void 0===d?0:d,c=t.borderColor;return e("rect",{x:i,y:o,fill:n,opacity:a,strokeWidth:s,stroke:void 0===c?"transparent":c,width:r,height:r,style:{pointerEvents:"none"}})},m=function(t){var i=t.x,o=t.y,r=t.size,n=t.fill,l=t.opacity,a=void 0===l?1:l,d=t.borderWidth,s=void 0===d?0:d,c=t.borderColor;return e("g",{transform:"translate("+i+","+o+")",children:e("path",{d:"\n                M"+r/2+" 0\n                L"+r+" "+r+"\n                L0 "+r+"\n                L"+r/2+" 0\n            ",fill:n,opacity:a,strokeWidth:s,stroke:void 0===c?"transparent":c,style:{pointerEvents:"none"}})})};function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},h.apply(this,arguments)}var u={top:0,right:0,bottom:0,left:0},b=function(e){var t,i=e.direction,o=e.itemsSpacing,r=e.padding,n=e.itemCount,l=e.itemWidth,a=e.itemHeight;if("number"!=typeof r&&("object"!=typeof(t=r)||Array.isArray(t)||null===t))throw new Error("Invalid property padding, must be one of: number, object");var d="number"==typeof r?{top:r,right:r,bottom:r,left:r}:h({},u,r),s=d.left+d.right,c=d.top+d.bottom,m=l+s,b=a+c,f=(n-1)*o;return"row"===i?m=l*n+f+s:"column"===i&&(b=a*n+f+c),{width:m,height:b,padding:d}},f=function(e){var t=e.anchor,i=e.translateX,o=e.translateY,r=e.containerWidth,n=e.containerHeight,l=e.width,a=e.height,d=i,s=o;switch(t){case"top":d+=(r-l)/2;break;case"top-right":d+=r-l;break;case"right":d+=r-l,s+=(n-a)/2;break;case"bottom-right":d+=r-l,s+=n-a;break;case"bottom":d+=(r-l)/2,s+=n-a;break;case"bottom-left":s+=n-a;break;case"left":s+=(n-a)/2;break;case"center":d+=(r-l)/2,s+=(n-a)/2}return{x:d,y:s}},g=function(e){var t,i,o,r,n,l,a=e.direction,d=e.justify,s=e.symbolSize,c=e.symbolSpacing,m=e.width,h=e.height;switch(a){case"left-to-right":t=0,i=(h-s)/2,r=h/2,l="central",!0===d?(o=m,n="end"):(o=s+c,n="start");break;case"right-to-left":t=m-s,i=(h-s)/2,r=h/2,l="central",!0===d?(o=0,n="start"):(o=m-s-c,n="end");break;case"top-to-bottom":t=(m-s)/2,i=0,o=m/2,n="middle",!0===d?(r=h,l="alphabetic"):(r=s+c,l="text-before-edge");break;case"bottom-to-top":t=(m-s)/2,i=h-s,o=m/2,n="middle",!0===d?(r=0,l="text-before-edge"):(r=h-s-c,l="alphabetic")}return{symbolX:t,symbolY:i,labelX:o,labelY:r,labelAnchor:n,labelAlignment:l}},y={circle:d,diamond:s,square:c,triangle:m},p=function(n){var a,d,s,c,m,u,b,f,p,v,S,x=n.x,k=n.y,C=n.width,W=n.height,B=n.data,w=n.direction,z=void 0===w?"left-to-right":w,O=n.justify,E=void 0!==O&&O,M=n.textColor,j=n.background,H=void 0===j?"transparent":j,L=n.opacity,X=void 0===L?1:L,Y=n.symbolShape,A=void 0===Y?"square":Y,T=n.symbolSize,q=void 0===T?16:T,R=n.symbolSpacing,D=void 0===R?8:R,F=n.symbolBorderWidth,I=void 0===F?0:F,P=n.symbolBorderColor,G=void 0===P?"transparent":P,J=n.onClick,K=n.onMouseEnter,N=n.onMouseLeave,Q=n.toggleSerie,U=n.effects,V=o({}),Z=V[0],$=V[1],_=l(),ee=r((function(e){if(U){var t=U.filter((function(e){return"hover"===e.on})).reduce((function(e,t){return h({},e,t.style)}),{});$(t)}null==K||K(B,e)}),[K,B,U]),te=r((function(e){if(U){var t=U.filter((function(e){return"hover"!==e.on})).reduce((function(e,t){return h({},e,t.style)}),{});$(t)}null==N||N(B,e)}),[N,B,U]),ie=g({direction:z,justify:E,symbolSize:null!=(a=Z.symbolSize)?a:q,symbolSpacing:D,width:C,height:W}),oe=ie.symbolX,re=ie.symbolY,ne=ie.labelX,le=ie.labelY,ae=ie.labelAnchor,de=ie.labelAlignment,se=[J,K,N,Q].some((function(e){return void 0!==e})),ce="function"==typeof A?A:y[A];return t("g",{transform:"translate("+x+","+k+")",style:{opacity:null!=(d=Z.itemOpacity)?d:X},children:[e("rect",{width:C,height:W,fill:null!=(s=Z.itemBackground)?s:H,style:{cursor:se?"pointer":"auto"},onClick:function(e){null==J||J(B,e),null==Q||Q(B.id)},onMouseEnter:ee,onMouseLeave:te}),i.createElement(ce,h({id:B.id,x:oe,y:re,size:null!=(c=Z.symbolSize)?c:q,fill:null!=(m=null!=(u=B.fill)?u:B.color)?m:"black",borderWidth:null!=(b=Z.symbolBorderWidth)?b:I,borderColor:null!=(f=Z.symbolBorderColor)?f:G},B.hidden?_.legends.hidden.symbol:void 0)),e("text",{textAnchor:ae,style:h({},_.legends.text,{fill:null!=(p=null!=(v=null!=(S=Z.itemTextColor)?S:M)?v:_.legends.text.fill)?p:"black",dominantBaseline:de,pointerEvents:"none",userSelect:"none"},B.hidden?_.legends.hidden.text:void 0),x:ne,y:le,children:B.label})]})},v=function(t){var i=t.data,o=t.x,r=t.y,n=t.direction,l=t.padding,a=void 0===l?0:l,d=t.justify,s=t.effects,c=t.itemWidth,m=t.itemHeight,h=t.itemDirection,u=void 0===h?"left-to-right":h,f=t.itemsSpacing,g=void 0===f?0:f,y=t.itemTextColor,v=t.itemBackground,S=void 0===v?"transparent":v,x=t.itemOpacity,k=void 0===x?1:x,C=t.symbolShape,W=t.symbolSize,B=t.symbolSpacing,w=t.symbolBorderWidth,z=t.symbolBorderColor,O=t.onClick,E=t.onMouseEnter,M=t.onMouseLeave,j=t.toggleSerie,H=b({itemCount:i.length,itemWidth:c,itemHeight:m,itemsSpacing:g,direction:n,padding:a}).padding,L="row"===n?c+g:0,X="column"===n?m+g:0;return e("g",{transform:"translate("+o+","+r+")",children:i.map((function(t,i){return e(p,{data:t,x:i*L+H.left,y:i*X+H.top,width:c,height:m,direction:u,justify:d,effects:s,textColor:y,background:S,opacity:k,symbolShape:C,symbolSize:W,symbolSpacing:B,symbolBorderWidth:w,symbolBorderColor:z,onClick:O,onMouseEnter:E,onMouseLeave:M,toggleSerie:j},i)}))})},S=function(t){var i=t.data,o=t.containerWidth,r=t.containerHeight,n=t.translateX,l=void 0===n?0:n,a=t.translateY,d=void 0===a?0:a,s=t.anchor,c=t.direction,m=t.padding,h=void 0===m?0:m,u=t.justify,g=t.itemsSpacing,y=void 0===g?0:g,p=t.itemWidth,S=t.itemHeight,x=t.itemDirection,k=t.itemTextColor,C=t.itemBackground,W=t.itemOpacity,B=t.symbolShape,w=t.symbolSize,z=t.symbolSpacing,O=t.symbolBorderWidth,E=t.symbolBorderColor,M=t.onClick,j=t.onMouseEnter,H=t.onMouseLeave,L=t.toggleSerie,X=t.effects,Y=b({itemCount:i.length,itemsSpacing:y,itemWidth:p,itemHeight:S,direction:c,padding:h}),A=Y.width,T=Y.height,q=f({anchor:s,translateX:l,translateY:d,containerWidth:o,containerHeight:r,width:A,height:T}),R=q.x,D=q.y;return e(v,{data:i,x:R,y:D,direction:c,padding:h,justify:u,effects:X,itemsSpacing:y,itemWidth:p,itemHeight:S,itemDirection:x,itemTextColor:k,itemBackground:C,itemOpacity:W,symbolShape:B,symbolSize:w,symbolSpacing:z,symbolBorderWidth:O,symbolBorderColor:E,onClick:M,onMouseEnter:j,onMouseLeave:H,toggleSerie:"boolean"==typeof L?void 0:L})},x={start:"left",middle:"center",end:"right"},k=function(e,t){var i=t.data,o=t.containerWidth,r=t.containerHeight,n=t.translateX,l=void 0===n?0:n,a=t.translateY,d=void 0===a?0:a,s=t.anchor,c=t.direction,m=t.padding,h=void 0===m?0:m,u=t.justify,y=void 0!==u&&u,p=t.itemsSpacing,v=void 0===p?0:p,S=t.itemWidth,k=t.itemHeight,C=t.itemDirection,W=void 0===C?"left-to-right":C,B=t.itemTextColor,w=t.symbolSize,z=void 0===w?16:w,O=t.symbolSpacing,E=void 0===O?8:O,M=t.theme,j=b({itemCount:i.length,itemWidth:S,itemHeight:k,itemsSpacing:v,direction:c,padding:h}),H=j.width,L=j.height,X=j.padding,Y=f({anchor:s,translateX:l,translateY:d,containerWidth:o,containerHeight:r,width:H,height:L}),A=Y.x,T=Y.y,q="row"===c?S+v:0,R="column"===c?k+v:0;e.save(),e.translate(A,T),e.font=M.legends.text.fontSize+"px "+(M.legends.text.fontFamily||"sans-serif"),i.forEach((function(t,i){var o,r,n=i*q+X.left,l=i*R+X.top,a=g({direction:W,justify:y,symbolSize:z,symbolSpacing:E,width:S,height:k}),d=a.symbolX,s=a.symbolY,c=a.labelX,m=a.labelY,h=a.labelAnchor,u=a.labelAlignment;e.fillStyle=null!=(o=t.color)?o:"black",e.fillRect(n+d,l+s,z,z),e.textAlign=x[h],"central"===u&&(e.textBaseline="middle"),e.fillStyle=null!=(r=null!=B?B:M.legends.text.fill)?r:"black",e.fillText(String(t.label),n+c,l+m)})),e.restore()},C=function(e){var t=e.scale,i=e.domain,o=e.reverse,r=void 0!==o&&o,l=e.valueFormat,a=void 0===l?function(e){return e}:l,d=e.separator,s=void 0===d?" - ":d;return n((function(){var e=(null!=i?i:t.range()).map((function(e,i){var o=t.invertExtent(e),r=o[0],n=o[1];return{id:e,index:i,extent:[r,n],label:""+a(r)+s+a(n),value:t(r),color:e}}));return!0===r&&e.reverse(),e}),[i,t,r])},W={data:a.arrayOf(a.object),anchor:a.oneOf(["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left","center"]).isRequired,translateX:a.number,translateY:a.number,direction:a.oneOf(["row","column"]).isRequired,itemsSpacing:a.number,itemWidth:a.number.isRequired,itemHeight:a.number.isRequired,itemDirection:a.oneOf(["left-to-right","right-to-left","top-to-bottom","bottom-to-top"]),itemTextColor:a.string,itemBackground:a.string,itemOpacity:a.number,symbolShape:a.oneOfType([a.oneOf(["circle","diamond","square","triangle"]),a.func]),symbolSize:a.number,symbolSpacing:a.number,symbolBorderWidth:a.number,symbolBorderColor:a.string,onClick:a.func,onMouseEnter:a.func,onMouseLeave:a.func,effects:a.arrayOf(a.shape({on:a.oneOfType([a.oneOf(["hover"])]).isRequired,style:a.shape({itemTextColor:a.string,itemBackground:a.string,itemOpacity:a.number,symbolSize:a.number,symbolBorderWidth:a.number,symbolBorderColor:a.string}).isRequired}))};export{S as BoxLegendSvg,W as LegendPropShape,v as LegendSvg,p as LegendSvgItem,d as SymbolCircle,s as SymbolDiamond,c as SymbolSquare,m as SymbolTriangle,k as renderLegendToCanvas,C as useQuantizeColorScaleLegendData};
//# sourceMappingURL=nivo-legends.es.js.map
